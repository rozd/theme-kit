{
  "$schema": "https://json-schema.org/draft-07/schema#",
  "$id": "https://github.com/rozd/theme-kit/theme.schema.json",
  "title": "ThemeKit Configuration",
  "description": "Defines style tokens and generation settings for ThemeKit code generation.",
  "type": "object",
  "properties": {
    "styles": {
      "description": "Style token definitions for colors, gradients, mesh gradients, and shadows.",
      "type": "object",
      "properties": {
        "colors": {
          "description": "Color style tokens (resolved as ThemeAdaptiveStyle<Color>).",
          "type": "array",
          "items": { "$ref": "#/$defs/tokenEntry" }
        },
        "gradients": {
          "description": "Gradient style tokens (resolved as ThemeAdaptiveStyle<Gradient>).",
          "type": "array",
          "items": { "$ref": "#/$defs/tokenEntry" }
        },
        "meshGradients": {
          "description": "Mesh gradient style tokens (resolved as ThemeAdaptiveStyle<MeshGradient>).",
          "type": "array",
          "items": { "$ref": "#/$defs/tokenEntry" }
        },
        "shadows": {
          "description": "Shadow style tokens (resolved as ThemeAdaptiveStyle<Shadow>).",
          "type": "array",
          "items": { "$ref": "#/$defs/tokenEntry" }
        }
      },
      "additionalProperties": false
    },
    "config": {
      "description": "Generation configuration settings.",
      "type": "object",
      "properties": {
        "outputPath": {
          "type": "string",
          "description": "Relative path from the generation root where generated files should be written (e.g., 'UI/Theme'). Defaults to '.' if not specified."
        },
        "shouldGeneratePreview": {
          "type": "boolean",
          "description": "To generate a Theme+Preview.swift with all tokens as visual palette."
        }
      },
      "required": ["outputPath"],
      "additionalProperties": false
    }
  },
  "required": ["styles"],
  "additionalProperties": false,
  "$defs": {
    "tokenEntry": {
      "description": "A style token. Use a string when the ShapeStyle name matches the token name, or an object to override the ShapeStyle name.",
      "oneOf": [
        {
          "type": "string",
          "description": "Token name, used for both the struct property and the ShapeStyle extension."
        },
        {
          "type": "object",
          "description": "Token with a custom ShapeStyle name.",
          "properties": {
            "name": {
              "type": "string",
              "description": "The struct property name (e.g. \"primary\")."
            },
            "style": {
              "type": "string",
              "description": "The ShapeStyle extension name (e.g. \"primaryColor\")."
            }
          },
          "required": ["name", "style"],
          "additionalProperties": false
        }
      ]
    }
  }
}
