nonisolated public struct ThemeShadowedStyleGenerator: Sendable {

    nonisolated public init() {}

    nonisolated public func generate() -> GeneratedFile {
        let content = """
        // Generated by ThemeKit â€” do not edit

        import SwiftUI
        import ThemeKit

        nonisolated public struct ThemeShadowedStyle<Base: ShapeStyle>: ShapeStyle {
            nonisolated let base: Base
            nonisolated let shadowKeyPath: KeyPath<Theme, ThemeAdaptiveStyle<Shadow>>

            nonisolated public init(base: Base, shadowKeyPath: KeyPath<Theme, ThemeAdaptiveStyle<Shadow>>) {
                self.base = base
                self.shadowKeyPath = shadowKeyPath
            }

            nonisolated public func resolve(in environment: EnvironmentValues) -> some ShapeStyle {
                let shadow = environment.theme[keyPath: shadowKeyPath]
                    .resolved(in: environment)
                guard let shadowStyle = shadow.shadowStyle else {
                    return AnyShapeStyle(base)
                }
                return AnyShapeStyle(base.shadow(shadowStyle))
            }
        }

        extension ThemeShadowedStyle: Equatable where Base: Equatable {}

        """
        return GeneratedFile(name: "ThemeShadowedStyle.swift", content: content)
    }
}
